로그인 성공 후 사용자 처리 추가하기

1. handler 클래스 작성하기

@Component("loginSuccessHandler")
public class LoginSuccessHandler implements AuthenticationSuccessHandler {

	@Override
	public void onAuthenticationSuccess(
			HttpServletRequest request, HttpServletResponse response, Authentication authentication) 
					throws IOException, ServletException {
		Collection<? extends GrantedAuthority> list = authentication.getAuthorities();
		for (GrantedAuthority auth : list) {
			System.out.println(auth.getAuthority());
		}
		response.sendRedirect(request.getContextPath() + "/security/main.do");
	}
}


2. main.jsp 페이지 작성

	<h2>메인페이지</h2>
	<a href="<c:url value="/security/index.jsp" />">돌아가기</a>
	
	
3. 컨트롤러(TestController) 메인페이지 호출 url 작성
	
	@RequestMapping("/main.do")
	public void main() {
		System.out.println("main");
	}	
	
	
4.  spring-security.xml 설정
	
	<security:form-login login-page="/security/login-form.do" username-parameter="userId" 
	                     authentication-success-handler-ref="loginSuccessHandler" />	
	
	
5.	index.jsp : 메인페이지 링크 추가하기
	<div><a href="<c:url value="/security/main.do" />">메인페이지</a></div>

	
6.  테스트 진행하기	
	