<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>
<body>
    <h2>키 이벤트 활용하기</h2>
    <div>
        <input type="text" id="msg1"/><span>6글자만 입력(한글문제)</span>
    </div>
    <div>
        <input type="text" id="msg2"/><span>영어, 숫자 입력</span>
    </div>
    <div>
        <input type="text" id="msg3"/><span>숫자 입력</span>
    </div>
    <script>
        let msg3 = document.querySelector("#msg3");
        msg3.addEventListener("keyup", (e) => {
            e.target.value = e.target.value.replace(/[ㄱ-ㅎㅏ-ㅣ가-힣]/g,"");
        });
        let msg2 = document.querySelector("#msg2");
        msg2.addEventListener("keyup", (e) => {
            e.target.value = e.target.value.replace(/[ㄱ-ㅎㅏ-ㅣ가-힣]/g,"");
        });

        let msg1 = document.querySelector("#msg1");
        msg1.addEventListener("keydown", (e) => {   // 메모리에만 올라 가있고 적용은 안된 상태
            let ele = e.target;
            let val = ele.value;

            // console.log(ele.value, ele.value.length);    
            // ctrl + v 한 경우의 체크
            if (e.key === "v" && e.ctrlKey) {
                setTimeout(() => {
                    if (e.target.value.length > 6) {
                        alert("내용은 6자까지 가능합니다.");
                    }
                    e.target.value = e.target.value.substr(0, 6);
                }, 10);
            }


            if (val.length < 6) {  // 현재 들어온 값 제외한 기존의 값들 // 6글자까지 입력
                return;
            }
            // 일부 키 허용하기
            // 8 : 백스페이스, 37 : 화살표 왼쪽 이동, 46 : delete 키
            if ([8, 37, 46].indexOf(e.keyCode) != -1) return;


            e.preventDefault();
            // 한글처리
            setTimeout(() => {
                ele.value = ele.value.substr(0, 6);
            }, 10);
        });
        msg1.addEventListener("blur", (e) => {
            e.target.value = e.target.value.substr(0, 6);
        });
    </script>
</body>
</html>