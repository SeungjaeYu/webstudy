<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
</head>
<body>
	<h2>Ajax - 목록데이터 조회</h2>
	<button id="btn">클릭</button>
	<hr />
	<div id="result"></div>
	<script>
		let btn = document.getElementById("btn");
		btn.addEventListener("click", (e) => {
			let xhr = new XMLHttpRequest();
			xhr.onreadystatechange = () => {
				if (xhr.readyState == 4 && xhr.status == 200) {
					let result = document.getElementById("result");
					// 문자열의 내용이 JSON 형태라면 ...
					// ES5 부터 제공됨(이전에는 eval 함수 사용)
					let list = JSON.parse(xhr.responseText);
					let html = "";
					for (let i = 0; i < list.length; i++) {
						console.log(list[i].id, list[i].pass, list[i].name);
						html += `<div>
								아이디 : ${list[i].id}
								패스워드 : ${list[i].pass}
								이름 : ${list[i].name}
						</div>`
					}
					
					result.innerHTML = html;
					
					
					/*
					let data = "let i = 100; let j = 200;";
					eval(data);
					console.log(i, j, i + j);
					*/
				}
			};
			xhr.open("GET", "test07.do", true);
// 			xhr.setHeader()
			xhr.send();
			
		});
	</script>
</body>
</html>