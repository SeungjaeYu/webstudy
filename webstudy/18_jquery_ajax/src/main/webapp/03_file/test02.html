<!DOCTYPE html>
<!--
	1 - form 플러그인 사용하기
	2 - FormData 객체 이용 
 -->
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Document</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script src="http://malsup.github.com/jquery.form.js"></script>
</head>
<body>
	<form id="fileForm" action="/18_jquery_ajax/file/test01.do" method="post" enctype="multipart/form-data">
		<input type="text" id="msg" name="msg" /><br>
		<input type="file" name="attach1" /><br>
		<input type="file" name="attach2" /><br>
		<!-- 동일한 이름을 서버에 전송시 파일의 업로드는 가능하지만 서버의 cos.jar에서 파일의 정보를 하나만 얻어올 수 있다.
		<input type="file" name="attach" /><br>
		<input type="file" name="attach" /><br>
		 -->
		<button>업로드</button>
	</form>
	<div id="result"></div>
    <script>
    	$("#fileForm").ajaxForm({
    		beforeSubmit: () => {
    			if ($("#msg").val() === "") {
    				alert("메세지를 입력하세요.");
	    			return false;
    			}
    		},
    		success: (result) => {
    			$("#result").html(result);
    		},
    		error: () => alert("오류")
    	});
    </script>
</body>
</html>